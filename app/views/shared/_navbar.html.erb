<nav class="container mx-auto px-6 py-3 flex justify-between items-center">
  <div class="text-2xl font-bold text-amber-600">Constructec</div>

  <!-- Desktop Navigation -->
  <div class="hidden md:flex space-x-4 items-center">
    <%= link_to 'Accueil', root_path, class: 'text-gray-800 hover:text-amber-600' %>
    <%= link_to 'Services', services_path, class: 'text-gray-800 hover:text-amber-600' %>
    <%= link_to 'À propos', about_path, class: 'text-gray-800 hover:text-amber-600' %>
    <%= link_to 'Blog', articles_path, class: 'text-gray-800 hover:text-amber-600' %>

    <% if user_signed_in? %>
      <div class="relative ml-3">
        <button type="button" class="flex rounded-full focus:outline-none" id="user-menu-button" aria-haspopup="true" aria-expanded="false">
          <%= image_tag "https://kitt.lewagon.com/placeholder/users/ssaunier", class: "h-8 w-8 rounded-full" %>
        </button>
        <div class="absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 hidden" id="user-menu" role="menu" aria-orientation="vertical" tabindex="-1">
          <%= link_to "Your Profile", user_path(current_user), class: "block px-4 py-2 text-sm text-gray-700", role: "menuitem", tabindex: "-1" %>
          <%= link_to "Settings", edit_user_path(current_user), class: "block px-4 py-2 text-sm text-gray-700", role: "menuitem", tabindex: "-1" %>
<%= button_to "Sign out", destroy_user_session_path, method: :delete, class: "block px-4 py-2 text-sm text-gray-700", data: { turbo: "false" } %>
        </div>
      </div>
    <% else %>
      <%= link_to "Login", new_user_session_path, class: "text-gray-800 hover:text-amber-600" %>
      <%= link_to "Sign up", new_user_registration_path, class: "ml-4 text-gray-800 hover:text-amber-600" %>
    <% end %>
  </div>

  <!-- Mobile Navigation Toggle -->
  <div class="md:hidden">
    <button class="text-gray-800 focus:outline-none" id="navbar-toggle" aria-expanded="false" aria-controls="navbar-menu">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
      </svg>
    </button>
  </div>
</nav>

<!-- Mobile Navigation Menu -->
<div class="hidden md:hidden" id="navbar-menu">
  <div class="px-2 pt-2 pb-3 space-y-1">
    <%= link_to 'Accueil', root_path, class: 'block px-3 py-2 text-gray-800 hover:text-amber-600' %>
    <%= link_to 'Services', services_path, class: 'block px-3 py-2 text-gray-800 hover:text-amber-600' %>
    <%= link_to 'À propos', about_path, class: 'block px-3 py-2 text-gray-800 hover:text-amber-600' %>
    <%= link_to 'Blog', articles_path, class: 'block px-3 py-2 text-gray-800 hover:text-amber-600' %>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Toggle dropdown menu and navbar for mobile view
  const navbarToggle = document.getElementById('navbar-toggle');
  if (navbarToggle) {
    navbarToggle.addEventListener('click', () => {
      const menu = document.getElementById('navbar-menu');
      menu.classList.toggle('hidden');
    });
  }

  // Toggle user menu dropdown
  const userMenuButton = document.getElementById('user-menu-button');
  if (userMenuButton) {
    userMenuButton.addEventListener('click', () => {
      const userMenu = document.getElementById('user-menu');
      userMenu.classList.toggle('hidden');
    });
  }
});
</script>
